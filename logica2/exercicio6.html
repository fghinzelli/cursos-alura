<meta charset="utf-8">
<canvas id="tela" width="600" height="400"></canvas>

<script>
	var tela = document.querySelector('#tela');
	var pincel = tela.getContext('2d');

	var serie2015 = [50, 25, 20, 5];
	var serie2016 = [65, 20, 13, 2];
	var legendas = ['Chrome', 'Firefox', 'Safari', 'Outros'];

	var coresGrafico = ['blue', 'green', 'yellow', 'red'];

	desenhaBarra(0, 0, serie2015, coresGrafico, '2015');
	desenhaBarra(200, 0, serie2016, coresGrafico, '2016');

	function desenhaBarra(x, y, serie, cores, rotulo) {
		desenhaTexto(rotulo, x, y+20);
	  var pos_y = y + 50;
		for (i=0; i<serie.length; i++) {
			desenhaRetangulo(x, pos_y, coresGrafico[i], 30, serie[i]+50); 
			desenhaTexto(legendas[i], x+50, pos_y+serie[i]+30); 
			pos_y =  pos_y + serie[i]+50; 
		}
	}

	function desenhaRetangulo(x, y, cor, largura, altura) {
		
		var tela = document.querySelector('#tela');
		var pincel = tela.getContext('2d');
		
		pincel.fillStyle = cor;
		pincel.fillRect(x, y, largura, altura);
		pincel.fillStyle = 'black';
		pincel.strokeRect(x, y, largura, altura);
	}

	function desenhaTexto(texto, x, y) {
	
		var tela = document.querySelector('#tela');
		var pincel = tela.getContext('2d');
		
		pincel.font = '20px Georgia';
		pincel.fillStyle = 'black';
		pincel.fillText(texto, x, y);
	}

</script>
